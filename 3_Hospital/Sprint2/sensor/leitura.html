<html>
<head>
  <title>Leitura Sensor DHT-22</title>
  <script src='js/jquery-1.11.3.min.js'></script>
  <script>
    myObject = {};
    saida = '';
    leituras = 10;
    j = 0;
    l = 0;
    
/*
    $('button').click(function () {
      alert('aqui')
      leituras = $('#leituras').value;
    });
*/
    
    setInterval(function () {
      $.get('texto.txt', function(myContentFile) {
        lines = myContentFile.split("\r");

        for (var i in lines) {
            //here your code
            //each line is "lines[i]"

            //save in object "myObject": 
          //print in console
          console.log("line " + i + " :" + lines[i]);
          console.log("leitura " + l);
        }
        saida  = ret(lines[i], l)
        $('#filecontents').html(saida);
      }, 'text');
      j++;
      if (j == leituras) {
        j = 0;
      }
      l++;
    }, 1000);
    
    function ret(leitura, l) {
      saida = '';
      for (k = 1; k < leituras; k++) {
        myObject[k-1] = myObject[k];
        saida += '<span class="result">' + k + ' - ' + myObject[k-1] + '</span><br>';
      }
      saida += '<span class="result">' + leituras + ' - ' + leitura + '</span><br>';
      myObject[leituras-1] = leitura;
      if (l >= leituras)
        return saida;
      else
        return 'Aguardando leitura';
    }

  </script>
</head>
<body>
  <h1>Leitura Sensor DHT-22</h1>
  <!-- <input type='number' id='leituras'> -->
  <!-- <button id='ok'>Ok</button> -->
  <div id='filecontents'>
    Aguardando leitura
  </div>
</body>
</html>